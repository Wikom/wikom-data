!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("react"),require("prop-types"),require("react-redux"),require("find-in-object"),require("react-symbol"),require("react-loading"),require("superagent"),require("file-saver"),require("redux"),require("react-router-redux")):"function"==typeof define&&define.amd?define("wikomData",["react","prop-types","react-redux","find-in-object","react-symbol","react-loading","superagent","file-saver","redux","react-router-redux"],r):"object"==typeof exports?exports.wikomData=r(require("react"),require("prop-types"),require("react-redux"),require("find-in-object"),require("react-symbol"),require("react-loading"),require("superagent"),require("file-saver"),require("redux"),require("react-router-redux")):e.wikomData=r(e.react,e["prop-types"],e["react-redux"],e["find-in-object"],e["react-symbol"],e["react-loading"],e.superagent,e["file-saver"],e.redux,e["react-router-redux"])}(window,function(e,r,n,t,a,o,u,i,c,l){return function(e){var r={};function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)n.d(t,a,function(r){return e[r]}.bind(null,a));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=10)}([function(r,n){r.exports=e},function(e,n){e.exports=r},function(e,r){e.exports=n},function(e,r){e.exports=t},function(e,r){e.exports=a},function(e,r){e.exports=o},function(e,r){e.exports=u},function(e,r){e.exports=i},function(e,r){e.exports=c},function(e,r){e.exports=l},function(e,r,n){"use strict";n.r(r);var t={};n.r(t),n.d(t,"LOAD_DATA_PENDING",function(){return v}),n.d(t,"LOAD_DATA_SUCCESS",function(){return h}),n.d(t,"LOAD_DATA_FAILURE",function(){return O}),n.d(t,"LOAD_DATA_CANCEL",function(){return A}),n.d(t,"LOAD_DATA_PROGRESS",function(){return D}),n.d(t,"CLEAR_DATA",function(){return j}),n.d(t,"REFRESH_DATA",function(){return P}),n.d(t,"SET_PAGINATION",function(){return _}),n.d(t,"CLEAR_PAGINATION",function(){return E}),n.d(t,"SET_USER",function(){return S});var a={};n.r(a),n.d(a,"setUser",function(){return x}),n.d(a,"configureRequest",function(){return q}),n.d(a,"baseRequest",function(){return w}),n.d(a,"get",function(){return L}),n.d(a,"post",function(){return R}),n.d(a,"put",function(){return C}),n.d(a,"del",function(){return k}),n.d(a,"types",function(){return t}),n.d(a,"loadDataPending",function(){return N}),n.d(a,"loadDataSuccess",function(){return F}),n.d(a,"loadDataFailure",function(){return I}),n.d(a,"loadDataCancel",function(){return U}),n.d(a,"loadDataProgress",function(){return G}),n.d(a,"clearData",function(){return M}),n.d(a,"refreshData",function(){return H}),n.d(a,"setPagination",function(){return Q}),n.d(a,"clearPagination",function(){return K}),n.d(a,"loadData",function(){return W}),n.d(a,"download",function(){return z}),n.d(a,"submit",function(){return B}),n.d(a,"upload",function(){return J}),n.d(a,"directDelete",function(){return V}),n.d(a,"confirmAndDelete",function(){return X});var o=n(0),u=n.n(o),i=n(1),c=n.n(i),l=n(2),s=n(5),f=n.n(s),d=n(6),p=n.n(d),m=n(3),b=n.n(m),y=n(7),g="@@wikom-data/",v=g+"LOAD_DATA_PENDING",h=g+"LOAD_DATA_SUCCESS",O=g+"LOAD_DATA_FAILURE",A=g+"LOAD_DATA_CANCEL",D=g+"LOAD_DATA_PROGRESS",j=g+"CLEAR_DATA",P=g+"REFRESH_DATA",_=g+"SET_PAGINATION",E=g+"CLEAR_PAGINATION",S=g+"SET_USER",x=function(e){var r=e.user;return{type:S,user:r}},T={},q=function(){return function(e,r){var n=b()("user.access_token",r());n&&(T.Accept="application/json",T.Authorization="Bearer "+n)}},w=function(e){var r=e.method,n=void 0===r?"GET":r,t=e.url;return p()(n,t).set(T)},L=function(e){var r=e.url;return w({url:r})},R=function(e){var r=e.url,n=e.data;return w({method:"POST",url:r}).send(n)},C=function(e){var r=e.url,n=e.data;return w({method:"PUT",url:r}).send(n)},k=function(e){var r=e.url;return w({method:"DELETE",url:r})},N=function(e){var r=e.name,n=e.url;return{type:v,name:r,url:n}},F=function(e){var r=e.name,n=e.url,t=e.data;return{type:h,name:r,url:n,data:t}},I=function(e){var r=e.name,n=e.url,t=e.error;return{type:O,name:r,url:n,error:t}},U=function(e){var r=e.name,n=e.url;return{type:A,name:r,url:n}},G=function(e){var r=e.name,n=e.url,t=e.percent;return{type:D,name:r,url:n,percent:t}},M=function(e){var r=e.name;return{type:j,name:r}},H=function(e){var r=e.name;return{type:P,name:r}},Q=function(e){var r=e.name,n=e.data;return{type:_,name:r,data:n}},K=function(e){var r=e.name;return{type:E,name:r}},W=function(e){var r=e.name,n=e.url;return function(e,t){if(!t().queries.pending||-1===t().queries.pending.indexOf(n)){e(N({name:r,url:n}));var a=L({url:n}),o=a.on("progress",function(t){e(G({name:r,url:n,percent:t.percent||100}))}).then(function(t){if(o.cancel=function(){},t.ok&&t.body&&(e(F({name:r,url:n,data:t.body.data})),t.header["x-pagination-current-page"])){var a={currentPage:Number(t.header["x-pagination-current-page"]),pageCount:Number(t.header["x-pagination-page-count"]),perPage:Number(t.header["x-pagination-per-page"]),totalCount:Number(t.header["x-pagination-total-count"])};e(Q({name:r,data:a}))}},function(t){e(I({name:r,url:n,error:t})),e(K({name:r}))});return o.cancel=function(){a.abort(),e(U({name:r,url:n}))},o}}},z=function(e){var r=e.name,n=e.url;return function(e){e(N({name:r,url:n}));var t=L({url:n}),a=t.responseType("blob").on("progress",function(t){e(G({name:r,url:n,percent:t.percent||100}))}).then(function(t){if(a.cancel=function(){},t.ok&&t.body){var o=function(e){var r=e["content-disposition"];if(r&&-1!==r.indexOf("attachment")){var n=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(r);if(n&&n[1])return n[1].replace(/['"]/g,"")}return null}(t.header)||r;Object(y.saveAs)(t.body,o),e(F({name:r,url:n,data:null}))}},function(t){e(I({name:r,url:n,error:t}))});return a.cancel=function(){t.abort(),e(U({name:r,url:n}))},a}},B=function(e){var r=e.url,n=e.data,t=void 0===n?{}:n,a=e.primaryKey,o=void 0===a?"id":a;return function(){var e=t.hasOwnProperty(o)?C({url:r+"/"+b()(o,t),data:t}):R({url:r,data:t}),n=e;return n.cancel=function(){return e.abort()},n}},J=function(e){var r=e.url,n=e.data,t=void 0===n?{}:n,a=e.primaryKey,o=void 0===a?"id":a;return function(){var e=t.hasOwnProperty(o)?w({method:"PUT",url:r+"/"+b()(o,t),data:t}):w({method:"POST",url:r});Object.keys(t).forEach(function(r){t[r]instanceof File?e.attach(r,t[r]):e.field(r,t[r])});var n=e;return n.cancel=function(){return e.abort()},n}},V=function(e){var r=e.url,n=e.refresh,t=void 0===n?null:n;return function(e){return e(function(e){var r=e.url;return function(){var e=k({url:r}),n=e;return n.cancel=function(){return e.abort()},n}}({url:r})).then(function(r){return null!==t?e(H({name:t})):Promise.resolve("success")}).catch(function(e){return Promise.reject("errored")})}},X=function(e){var r=e.url,n=e.refresh,t=void 0===n?null:n,a=e.message,o=void 0===a?"Sind Sie sicher, dass Sie diesen Eintrag löschen möchten?":a;return function(e){return confirm(o)?e(V({url:r,refresh:t})):Promise.resolve("canceled")}};function Y(e,r){if(null==e)return{};var n,t,a=function(e,r){if(null==e)return{};var n,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Z(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function re(e,r){return!r||"object"!==$(r)&&"function"!=typeof r?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):r}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,r){return(te=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var ae=function(e){function r(){return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),re(this,ne(r).apply(this,arguments))}var n,t,a;return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&te(e,r)}(r,o["Component"]),n=r,(t=[{key:"componentDidMount",value:function(){this.props.force&&(this._pendingFetch=this.props.loadData({name:this.props.name,url:this.props.url}))}},{key:"componentWillReceiveProps",value:function(e){(this.props.force&&this.props.url!==e.url||!0===e.refresh)&&(this._pendingFetch&&this._pendingFetch.cancel(),this.props.clearData({name:this.props.name}),this._pendingFetch=this.props.loadData({name:e.name,url:e.url}))}},{key:"componentWillUnmount",value:function(){this._pendingFetch&&this._pendingFetch.cancel(),this.props.force&&this.props.clearData({name:this.props.name})}},{key:"render",value:function(){return this.props.onlyLoaded&&this.props.isLoading?u.a.createElement("span",null,this.props.loading):u.a.createElement("span",null,this.props.children)}}])&&ee(n.prototype,t),a&&ee(n,a),r}(),oe=function(e,r,n,t,a,o,i,c,l){var s,f=r.data&&r.data[a]||[],d=!r.queries[a]||!0===r.queries[a].isPending,p="function"==typeof o&&f instanceof Array?f.map(o):f;return p=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"object"!=$(e)||"object"!=$(r)||"object"!=$(n)?e:Array.isArray(e)?(r=Array.isArray(r)?r:[],n=Array.isArray(n)?n:[],r.concat(e,n)):Object.assign({},r,e,n)}(p,i,c),u.a.cloneElement(e,function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.forEach(function(r){Z(e,r,n[r])})}return e}((Z(s={},t,d),Z(s,n,d?null:p),Z(s,"pagination",r.data&&r.data.pagination&&r.data.pagination[a]||null),s),l))},ue=Object(l.connect)(function(e,r){var n=r.children,t=r.name,a=(r.url,r.force),o=r.dataProp,i=r.isLoadingProp,c=r.refresh,l=r.dataMap,s=r.prependData,f=r.appendData,d=Y(r,["children","name","url","force","dataProp","isLoadingProp","refresh","dataMap","prependData","appendData"]);return{isLoading:!e.queries[t]||!0===e.queries[t].isPending,refresh:c||e.queries[t]&&!0===e.queries[t].isQueued,force:a||!e.queries[t]||!1===e.queries[t].isComplete,children:u.a.Children.map(n,function(r){return oe(r,e,o,i,t,l,s,f,d)})}},function(e){return{loadData:function(r){var n=r.name,t=r.url;return e(W({name:n,url:t}))},clearData:function(r){var n=r.name;return e(M({name:n}))}}})(ae);ue.defaultProps={dataProp:"data",isLoadingProp:"isLoading",loading:u.a.createElement(f.a,null),force:!1,refresh:!1,onlyLoaded:!1,dataMap:null},ue.propTypes={name:c.a.string.isRequired,url:c.a.string.isRequired,children:c.a.node,dataProp:c.a.string,isLoadingProp:c.a.string,force:c.a.bool,refresh:c.a.bool,onlyLoaded:c.a.bool,dataMap:c.a.func};var ie=ue,ce=n(4),le=n.n(ce),se=function(e){var r=e.error;return u.a.createElement("div",{className:"alert alert-danger",id:"page-alert-danger",role:"alert"},u.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},u.a.createElement(le.a,{symbol:"times"})),u.a.createElement("h4",null,u.a.createElement(le.a,{symbol:{symbol:"ban",className:"icon"}}),r.status," ",r.name),u.a.createElement("ul",null,u.a.createElement("li",null,r.message)))},fe=function(e){var r=e.errors;return r.length>0?u.a.createElement("div",null,r.map(function(e,r){return u.a.createElement(se,{key:r,error:e})})):null};fe.defaultProps={errors:[]},fe.propTypes={errors:c.a.arrayOf(c.a.object)};var de=Object(l.connect)(function(e,r){return{errors:e.errors}})(fe),pe=function(e){return function(r){return function(r){return function(n){return n.type===t.LOAD_DATA_FAILURE&&401===n.error.status&&(location.href=e),r(n)}}}},me=n(8),be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=e?Object(me.combineReducers)(e):null;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},n);switch(t.type){case h:a[t.name]=t.data;break;case O:a[t.name]=[];break;case j:delete a[t.name];break;case _:a.pagination||(a.pagination={}),a.pagination[t.name]=t.data;break;case E:a.pagination||(a.pagination={}),a.pagination[t.name]={};break;default:a=n}if(r){var o=Object.keys(e).reduce(function(e,r){return e[r]=n[r],e},{});return Object.assign({},a,r(o,t))}return a}};function ye(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var ge=function(e){return{url:e,isQueued:!1,isPending:!0,isComplete:!1,percent:0}},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case v:return Object.assign({},e,ye({},r.name,ge(r.url)));case h:case O:var n=e[r.name]?Object.assign({},e[r.name]):ge(r.url);return n.isPending=!1,n.isComplete=!0,n.percent=100,Object.assign({},e,ye({},r.name,n));case A:var t=Object.assign({},e);return delete t[r.name],t;case D:var a=e[r.name]?Object.assign({},e[r.name]):ge(r.url);return a.percent=r.percent,Object.assign({},e,ye({},r.name,a));case P:var o=e[r.name]?Object.assign({},e[r.name]):ge(r.url);return o.isQueued=!0,o.isPending=!1,o.isComplete=!1,o.percent=0,Object.assign({},e,ye({},r.name,o));case j:var u=Object.assign({},e);return delete u[r.name],u;default:return e}},he=n(9);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case O:var n={status:0,name:"Unbekannter Fehler",message:"Es ist ein unbekannter Fehler aufgetreten.",code:0};return"object"===Oe(r.error)&&(n.status=r.error.status,"object"===Oe(r.error.response)&&"object"===Oe(r.error.response.body)&&(n.name=r.error.response.body.name,n.message=r.error.response.body.message,r.error.response.body.hasOwnProperty("code")&&(n.code=r.error.response.body.code))),e.concat(n);case he.LOCATION_CHANGE:return[];default:return e}},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case S:return r.user;default:return e}};n.d(r,"loadData",function(){return je}),n.d(r,"download",function(){return Pe}),n.d(r,"submit",function(){return _e}),n.d(r,"setUser",function(){return Ee}),n.d(r,"configureRequest",function(){return Se}),n.d(r,"clearData",function(){return xe}),n.d(r,"refreshData",function(){return Te}),n.d(r,"confirmAndDelete",function(){return qe}),n.d(r,"directDelete",function(){return we}),n.d(r,"upload",function(){return Le}),n.d(r,"DataProvider",function(){return ie}),n.d(r,"AppError",function(){return de}),n.d(r,"actionTypes",function(){return t}),n.d(r,"ajaxErrorMiddleware",function(){return pe}),n.d(r,"dataReducer",function(){return be}),n.d(r,"queriesReducer",function(){return ve}),n.d(r,"errorReducer",function(){return Ae}),n.d(r,"userReducer",function(){return De}),n.d(r,"actions",function(){return a});var je=W,Pe=z,_e=B,Ee=x,Se=q,xe=M,Te=H,qe=X,we=V,Le=J;r.default=ie}])});
//# sourceMappingURL=index.js.map